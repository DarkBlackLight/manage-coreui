<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title><%= @config[:title] %></title>
  <link rel="icon" type="image/png" href="<%= "/#{@config[:scope]}/images/logo.png" %>"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag @config[:scope], media: "all", 'data-turbolinks-track': 'reload' %>
  <%= javascript_include_tag @config[:scope], 'data-turbolinks-track': 'reload' %>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous"/>
</head>

<body class="c-app controller-<%= controller_name %> action-<%= action_name %>" data-controller-name="<%= controller_name %>" data-action-name="<%= action_name %>" data-resource-id="<%= @resource.id rescue nil %>">
<% if devise_controller? %>
  <%= yield %>
<% else %>
  <div class="c-sidebar c-sidebar-dark c-sidebar-fixed c-sidebar-lg-show" id="sidebar">
    <%= render 'layouts/manage/sidebar' %>
  </div>

  <div class="c-wrapper">

    <%= render 'layouts/manage/header' %>

    <div class="c-body">
      <main class="c-main">
        <div class="container-fluid">
          <%= yield %>
        </div>
      </main>
    </div>

    <%= yield :footer if content_for?(:footer) %>
  </div>
<% end %>

<%= render 'layouts/manage/modal', modal_id: 'image-preview-modal', title: 'Image Preview', size: 'lg' do %>
  <%= tag.div class: 'modal-body' do %>
    <img src="" width="100%"/>
  <% end %>
  <%= tag.div class: 'modal-footer' do %>
    <%= button_tag 'Close', class: "btn btn-secondary", type: "button", "data-bs-dismiss": "modal" %>
  <% end %>
<% end %>

<% if flash[:success] %>
  <script>
    toastr.success("<%= flash[:success] %>", 'Success!')
  </script>
  <% flash[:success] = nil %>
<% end %>

</body>
</html>
